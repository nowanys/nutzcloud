# NutzCloud的demo

## 使用方式

1. 先启动 [loach](https://github.com/nutzam/loach)
2. 然后启动2~4个CloudServiceLauncher
3. 启动 CloudWebLauncher
4. 访问页面 http://127.0.0.1:8082

## 性能测试记录

## 基于HttpServletEndpoint的性能

测试机配置

- CPU: AMD R7 1700
- 内存: DDR4 2400, 2*8G
- 启动了4个CloudServiceLauncher进程,轮询策略

时间: 2018.03.30

### 通信协议 http, 客户端和服务端均为jetty组件

```
预热1k次
预热耗时: Total: 376ms : [18-03-30 15:40:40.292]=>[18-03-30 15:40:40.668]
单个请求平均耗时: 0.376
QPS: 2659
-----------------------
10线程执行1w次,耗时: Total: 1973ms : [18-03-30 15:40:40.668]=>[18-03-30 15:40:42.641]
单个请求平均耗时: 0.1973
QPS: 5068
-----------------------
25线程执行1w次,耗时: Total: 1981ms : [18-03-30 15:40:42.642]=>[18-03-30 15:40:44.623]
单个请求平均耗时: 0.1981
QPS: 5047
-----------------------
100线程执行1w次,耗时: Total: 3884ms : [18-03-30 15:40:44.624]=>[18-03-30 15:40:48.508]
单个请求平均耗时: 0.1942
QPS: 5149
-----------------------
200线程执行2w次,耗时: Total: 3789ms : [18-03-30 15:40:48.508]=>[18-03-30 15:40:52.297]
单个请求平均耗时: 0.18945
QPS: 5278
```

### 通信协议tcp, 客户端为阻塞式socket池,服务端为tio

```
预热1k次
预热耗时: Total: 434ms : [18-04-10 09:47:21.934]=>[18-04-10 09:47:22.368]
单个请求平均耗时: 0.434
QPS: 2304
-----------------------
10线程执行1w次,耗时: Total: 1112ms : [18-04-10 09:47:22.369]=>[18-04-10 09:47:23.481]
单个请求平均耗时: 0.1112
QPS: 8992
-----------------------
25线程执行1w次,耗时: Total: 1069ms : [18-04-10 09:47:23.481]=>[18-04-10 09:47:24.550]
单个请求平均耗时: 0.1069
QPS: 9354
-----------------------
100线程执行1w次,耗时: Total: 2130ms : [18-04-10 09:47:24.551]=>[18-04-10 09:47:26.681]
单个请求平均耗时: 0.1065
QPS: 9389
-----------------------
200线程执行2w次,耗时: Total: 2138ms : [18-04-10 09:47:26.681]=>[18-04-10 09:47:28.819]
单个请求平均耗时: 0.1069
QPS: 9354
```